{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Zvelte",
	"patterns": [
		{ "include": "#scope" }
	],
	"repository": {
		"scope": {
			"patterns": [
				{ "include": "#comments" },
				{ "include": "#tags" },
				{ "include": "#interpolation" }
			]
		},

		"comments": {
			"name": "comment",
			"begin": "<!--",
			"end": "-->"
		},

		"interpolation": {
			"patterns": [
				{
					"begin": "{{",
					"end": "}}",
					"beginCaptures": { "0": { "name": "punctuation.section.embedded" } },
					"endCaptures": { "0": { "name": "punctuation.section.embedded" } },
					"contentName": "meta.embedded.expression.svelte",
					"patterns": [
						{ "include": "source.js" }
					]
				}
			]
		},

		"attributes": {
			"patterns": [
				{ "include": "#attributes-keyvalue" }
			]
		},

		"attributes-keyvalue": {
			"begin": "((?:--)?[_$[:alpha:]][_\\-$[:alnum:]]*)",
			"end": "(?=\\s*+[^=\\s])",
			"beginCaptures": {
				"0": {
					"patterns": [
						{
							"match": "--.*",
							"name": "support.type.property-name"
						},
						{
							"match": ".*",
							"name": "entity.other.attribute-name"
						}
					]
				}
			},
			"patterns": [
				{
					"begin": "=",
					"beginCaptures": {
						"0": {
							"name": "punctuation.separator.key-value"
						}
					},
					"end": "(?<=[^\\s=])(?!\\s*=)|(?=/?>)",
					"patterns": [{ "include": "#attributes-value" }]
				}
			]
		},

		"attributes-value": {
			"patterns": [
				{
					"match": "(?:(['\"])([0-9._]+[\\w%]{,4})(\\1))|(?:([0-9._]+[\\w%]{,4})(?=\\s|/?>))",
					"captures": {
						"1": { "name": "punctuation.definition.string.begin" },
						"2": { "name": "constant.numeric.decimal" },
						"3": { "name": "punctuation.definition.string.end" },
						"4": { "name": "constant.numeric.decimal" }
					}
				},
				{
					"match": "([^\\s\"'=<>`/]|/(?!>))+",
					"name": "string.unquoted",
					"patterns": [{ "include": "#interpolation" }]
				},
				{
					"name": "string.quoted",
					"begin": "(['\"])",
					"end": "\\1",
					"patterns": [{ "include": "#interpolation" }]
				}
			]
		},

		"tags": {
			"patterns": [
				{ "include": "#tags-general-end" },
				{ "include": "#tags-general-start" }
			]
		},

		"tags-name": {
			"patterns": [
				{
					"match": "(zvelte|zone)(:)([a-z][\\w0-9:-]*)",
					"captures": {
						"1": { "name": "keyword.control" },
						"2": { "name": "punctuation.definition.keyword" },
						"3": { "name": "entity.name.tag" }
					}
				},
				{
					"match": "[a-z][\\w0-9:-]*",
					"name": "entity.name.tag"
				}
			]
		},

		"tags-start-attributes": {
			"begin": "",
			"end": "(?=/?>)",
			"name": "meta.tag.start",
			"patterns": [
				{ "include": "#attributes" }
			]
		},

		"tags-start-node": {
			"match": "(<)([^\\s>/]*)",
			"captures": {
				"1": { "name": "punctuation.definition.tag" },
				"2": { "patterns": [{ "include": "#tags-name" }] }
			}
		},

		"tags-end-node": {
			"match": "(</)(.*?)\\s*(>)|(/>)",
			"captures": {
				"1": { "name": "punctuation.definition.tag" },
				"2": { "patterns": [{ "include": "#tags-name" }] },
				"3": { "name": "punctuation.definition.tag" },
				"4": { "name": "punctuation.definition.tag" }
			}
		},

		"tags-general-start": {
			"begin": "(<)([^/\\s>/]*)",
			"end": "(/?>)",
			"beginCaptures": {
				"0": { "patterns": [{ "include": "#tags-start-node" }] }
			},
			"endCaptures": {
				"1": { "name": "punctuation.definition.tag" }
			},
			"patterns": [
				{ "include": "#tags-start-attributes" }
			]
		},

		"tags-general-end": {
			"begin": "(</)([^\\s>]*)",
			"end": "(>)",
			"beginCaptures": {
				"1": { "name": "punctuation.definition.tag" },
				"2": { "patterns": [{ "include": "#tags-name" }] }
			},
			"endCaptures": {
				"1": { "name": "punctuation.definition.tag" }
			}
		}
	},
	"scopeName": "source.zvelte"
}